{"ast":null,"code":"import React,{useState,useEffect}from'react';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Cart(){const[cartData,setCartData]=useState([]);useEffect(()=>{fetch(\"https://electric-app.onrender.com/cart\").then(response=>response.json()).then(data=>{setCartData(data);}).catch(error=>console.error(\"Error fetching cart data:\",error));},[]);// delete a transaction\nconst deleteTransaction=id=>{fetch(`https://electric-app.onrender.com/cart/${id}`,{method:'DELETE'}).then(response=>{if(response.ok){// Filter out the deleted transaction from the state\nsetCartData(cartData.filter(transaction=>transaction.id!==id));toast.success('Transaction deleted successfully!');}else{toast.error('Failed to delete transaction.');}}).catch(error=>{console.error('Error deleting transaction:',error);toast.error('Failed to delete transaction.');});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center mb-4\",children:\"Cart Transactions\"}),cartData.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No transactions found.\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cartData.map((transaction,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:transaction.id}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"ul\",{children:transaction.cartDetails.map((item,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[item.title,\" (x\",item.quantity,\")\"]},i))})}),/*#__PURE__*/_jsx(\"td\",{children:transaction.cartDetails.reduce((acc,item)=>acc+item.quantity,0)}),/*#__PURE__*/_jsxs(\"td\",{children:[\"Ksh\",transaction.totalAmount.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:new Date(transaction.createdAt).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>deleteTransaction(transaction.id),children:\"Delete\"})})]},index))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:window.print(),children:\"Print\"})]})]});}export default Cart;","map":{"version":3,"names":["React","useState","useEffect","toast","jsx","_jsx","jsxs","_jsxs","Cart","cartData","setCartData","fetch","then","response","json","data","catch","error","console","deleteTransaction","id","method","ok","filter","transaction","success","className","children","length","scope","map","index","cartDetails","item","i","title","quantity","reduce","acc","totalAmount","toFixed","Date","createdAt","toLocaleDateString","onClick","window","print"],"sources":["/home/mbuks/Desktop/ELECTRIC_APP/src/Component/Cart.js"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport { toast } from 'react-toastify'; \nimport 'react-toastify/dist/ReactToastify.css'; \n\nfunction Cart() {\n    const [cartData, setCartData] = useState([]); \n\n    useEffect(() => {\n        fetch(\"https://electric-app.onrender.com/cart\") \n            .then((response) => response.json())\n            .then((data) => {\n                setCartData(data); \n            })\n            .catch((error) => console.error(\"Error fetching cart data:\", error));\n    }, []);\n\n    // delete a transaction\n    const deleteTransaction = (id) => {\n        fetch(`https://electric-app.onrender.com/cart/${id}`, {\n            method: 'DELETE',\n        })\n        .then((response) => {\n            if (response.ok) {\n                // Filter out the deleted transaction from the state\n                setCartData(cartData.filter(transaction => transaction.id !== id));\n                toast.success('Transaction deleted successfully!');\n            } else {\n                toast.error('Failed to delete transaction.'); \n            }\n        })\n        .catch((error) => {\n            console.error('Error deleting transaction:', error);\n            toast.error('Failed to delete transaction.');\n        });\n    };\n\n    return (\n        <div className=\"container mt-4\">\n            <h1 className=\"text-center mb-4\">Cart Transactions</h1>\n\n            {cartData.length === 0 ? (\n                <p>No transactions found.</p>\n            ) : (\n                <div>\n                    {/* Render cart transaction details */}\n                    <table className=\"table table-striped\">\n                        <thead>\n                            <tr>\n                                <th scope=\"col\">ID</th>\n                                <th scope=\"col\">Product</th>\n                                <th scope=\"col\">Quantity</th>\n                                <th scope=\"col\">Total</th>\n                                <th scope=\"col\">Date</th>\n                                <th scope=\"col\">Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {cartData.map((transaction, index) => (\n                                <tr key={index}>\n                                    <td>{transaction.id}</td>\n                                    <td>\n                                        <ul>\n                                            {transaction.cartDetails.map((item, i) => (\n                                                <li key={i}>{item.title} (x{item.quantity})</li>\n                                            ))}\n                                        </ul>\n                                    </td>\n                                    <td>{transaction.cartDetails.reduce((acc, item) => acc + item.quantity, 0)}</td>\n                                    <td>Ksh{transaction.totalAmount.toFixed(2)}</td>\n                                    <td>{new Date(transaction.createdAt).toLocaleDateString()}</td>\n                                    <td>\n                                        <button\n                                            className=\"btn btn-danger\"\n                                            onClick={() => deleteTransaction(transaction.id)}\n                                        >\n                                            Delete\n                                        </button>\n                                    </td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                    <button onClick={window.print()}>Print</button>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default Cart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}